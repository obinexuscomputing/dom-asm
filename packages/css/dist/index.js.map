{"version":3,"file":"index.js","sources":["../src/ast/index.ts","../src/generator/index.ts","../src/optimizer/index.ts","../src/tokenizer/index.ts","../src/validator/index.ts","../src/parser/index.ts","../src/index.ts"],"sourcesContent":[null,null,null,null,null,null,null],"names":["ASTBuilder","tokens","position","constructor","this","currentToken","length","consumeToken","token","parseStylesheet","stylesheet","type","children","rule","parseRule","push","selector","parseSelector","value","declarations","parseDeclarations","closingBrace","Error","declaration","parseDeclaration","property","parseProperty","parseValue","semicolon","buildAST","CodeGenerator","ast","generateStylesheet","node","map","child","generateRule","join","find","filter","generateSelector","generateDeclaration","generate","Optimizer","removeDuplicateDeclarations","uniqueDeclarations","propertyNode","concat","Object","values","mergeAdjacentRules","ruleMap","c","optimize","Tokenizer","input","line","column","isWhitespace","char","isCommentStart","consumeWhitespace","start","slice","consumeComment","consumeOther","tokenize","Validator","errors","validateStylesheet","validateRule","validateDeclaration","validate","Parser","parse","window","DOMCSS"],"mappings":"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"}