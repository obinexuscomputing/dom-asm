function t(t){const{states:e,transitions:s,initialState:r,acceptingStates:c}=t;let o=function(t,n){const i=t.filter((t=>!n.includes(t)));return[n,i]}(e,c),a=!0;for(;a;)a=!1,o=n(o,s);const u=o.map((t=>t[0])),f={};return u.forEach((t=>{f[t]={},Object.entries(s[t]).forEach((([n,e])=>{f[t][n]=i(o,e)}))})),{states:u,transitions:f,initialState:i(o,r),acceptingStates:c.filter((t=>u.includes(t)))}}function n(t,n){const i=[];return t.forEach((t=>{const e={};t.forEach((t=>{const i=JSON.stringify(n[t]);e[i]||(e[i]=[]),e[i].push(t)})),i.push(...Object.values(e))})),i}function i(t,n){return t.find((t=>t.includes(n)))?.[0]??n}function e(t,n){const i=new Map;return function t(e){if(i.has(e.id))return i.get(e.id);const s={...e,transitions:{}};return Object.entries(e.transitions).forEach((([i,r])=>{const c=n.transitions[e.id]?.[i];c&&(s.transitions[i]=t({...e,id:c}).id)})),i.set(e.id,s),s}(t)}function s(t){return Object.values(t.transitions).every((n=>Object.values(n).every((n=>t.states.includes(n)))))}function r(t){const n=new Set;return function t(i){return!!n.has(i.id)||(n.add(i.id),Object.values(i.transitions).every((n=>t({...i,id:n}))))}(t)}export{t as minimizeAutomaton,e as optimizeAST,r as validateAST,s as validateAutomaton};
//# sourceMappingURL=index.js.map
