{"version":3,"file":"index.js","sources":["../src/automaton/StateMachine.ts","../src/automaton/StateMinimizer.ts","../src/automaton/StateMachineAST.ts"],"sourcesContent":[null,null,null],"names":["StateMachine","constructor","initialState","transitions","this","currentState","states","Set","flatMap","t","from","to","alphabet","map","on","getCurrentState","transition","event","find","Error","minimize","partitions","nonFinalStates","filter","s","isFinalState","finalStates","add","changed","partition","first","rest","newPartitions","newPartition","state","areEquivalent","size","delete","newPart","updateTransitions","state1","state2","symbol","next1","getNextState","next2","inSamePartition","has","stateMap","Map","representative","set","get","values","StateMinimizer","automaton","acceptingStates","initializePartitions","partitionsChanged","splitPartitions","length","minimizedStates","minimizedTransitions","forEach","Object","entries","input","nextState","findPartitionRepresentative","includes","nonAcceptingStates","splitMap","signature","JSON","stringify","push","StateMachineAST","root","optimizeAST","updatedNodes","traverse","node","id","newNode","nextNodeId","minimizedState","StateMachineASTOptimizer"],"mappings":"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"}