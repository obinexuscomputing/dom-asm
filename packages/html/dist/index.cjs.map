{"version":3,"file":"index.cjs","sources":["../src/ast/index.ts","../src/tokenizer/index.ts","../src/validator/index.ts","../src/parser/index.ts","../src/optimizer/index.ts","../src/generator/index.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["AST","root","constructor","this","type","name","children","parent","buildAST","tokens","stack","currentParent","token","elementNode","attributes","push","Error","pop","length","textNode","value","commentNode","getRoot","printAST","node","depth","indent","repeat","console","log","forEach","child","TokenType","HTMLTokenizer","input","position","tokenize","readEndTag","readComment","readStartTag","readText","readUntil","attrName","trim","quote","attrValue","RegExp","stopChar","start","test","slice","Validator","namespaceRules","html","attributeRules","validationCache","Map","registerNamespace","namespace","tags","registerAttributes","tag","validateAST","ast","cacheKey","getCacheKey","has","get","errors","traverseAST","result","valid","set","validateElement","tagName","split","includes","attr","Object","entries","JSON","stringify","key","undefined","isElementNode","HTMLParserError","message","super","captureStackTrace","optimize","removeEmptyNodes","mergeTextNodes","filter","isSelfClosingTag","i","current","next","splice","generateHTML","generateAttributes","map","join","tokenizer","astBuilder","validator","errorHandler","shouldThrow","options","throwOnError","setErrorHandler","handler","handleError","error","quiet","isWhitespace","str","parse","buildASTWithRecovery","cleanWhitespace","isTextNode","skipUntilTag","matchingStartIndex","findIndex","unclosedNode"],"mappings":"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"}