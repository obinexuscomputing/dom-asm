{"version":3,"file":"index.cjs","sources":["../src/tokenizer/index.ts","../src/parser/HTMLParser.ts","../src/ast/HTMLASTOptimizer.ts","../src/generator/index.ts","../src/validator/index.ts"],"sourcesContent":[null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","push","readComment","readDoctype","readEndTag","readStartTag","readText","getCurrentLocation","consume","value","readUntil","trim","type","name","toLowerCase","Error","attributes","selfClosing","skipWhitespace","attrName","quote","attrValue","stop","start","test","slice","offset","str","startsWith","matches","pattern","count","result","i","char","addError","message","console","error","HTMLParserError","token","super","optimize","ast","root","removeEmptyTextNodes","mergeTextNodes","node","children","filter","child","forEach","current","next","currentText","nextText","mergedText","endsWith","splice","lastChild","selfClosingTags","generateHTML","generateAttributes","map","join","isSelfClosingTag","Object","entries","key","tagName","includes","tokenizer","options","throwOnError","parse","buildAST","metadata","computeMetadata","errorHandler","nodeCount","elementCount","textCount","commentCount","stack","currentParent","element","handleError","pop","lastToken","traverse","setErrorHandler","handler","validate","errors","valid"],"mappings":"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"}