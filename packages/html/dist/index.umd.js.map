{"version":3,"file":"index.umd.js","sources":["../src/tokenizer/HTMLTokenizer.ts","../src/parser/HTMLParser.ts","../src/ast/HTMLASTOptimizer.ts","../src/generator/index.ts","../src/validator/index.ts"],"sourcesContent":[null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","commentToken","readComment","type","value","push","readDoctype","readEndTag","readStartTag","textToken","readText","getCurrentLocation","consume","name","readTagName","attributes","selfClosing","skipWhitespace","attrName","readUntil","trim","quote","startPos","result","i","test","toLowerCase","offset","str","startsWith","stop","start","char","slice","count","HTMLParserError","Error","token","message","super","optimize","ast","root","removeEmptyTextNodes","mergeTextNodes","node","children","filter","child","forEach","current","next","currentText","nextText","splice","map","selfClosingTags","generateHTML","generateAttributes","join","isSelfClosingTag","Object","entries","key","tagName","includes","tokenizer","options","throwOnError","parse","buildAST","metadata","computeMetadata","error","errorHandler","nodeCount","elementCount","textCount","commentCount","stack","currentParent","element","handleError","pop","lastToken","traverse","setErrorHandler","handler","validate","errors","valid"],"mappings":"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"}