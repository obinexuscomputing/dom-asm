{"version":3,"file":"index.umd.js","sources":["../src/tokenizer/index.ts","../src/ast/index.ts","../src/validator/index.ts","../src/parser/index.ts","../src/generator/index.ts","../src/optimizer/index.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["HTMLTokenizer","input","position","constructor","this","tokenize","tokens","length","push","readEndTag","readComment","readStartTag","readText","name","readUntil","attributes","attrName","trim","quote","attrValue","RegExp","type","value","stopChar","start","test","slice","AST","root","children","parent","buildAST","stack","currentParent","token","elementNode","Error","pop","textNode","commentNode","getRoot","printAST","node","depth","indent","repeat","console","log","forEach","child","Validator","namespaceRules","html","attributeRules","validationCache","Map","registerNamespace","namespace","tags","registerAttributes","tag","validateAST","ast","cacheKey","getCacheKey","has","get","errors","traverseAST","result","valid","set","validateElement","tagName","split","includes","attr","Object","entries","JSON","stringify","key","undefined","isElementNode","HTMLParserError","message","super","captureStackTrace","generateHTML","generateAttributes","map","join","isSelfClosingTag","tokenizer","astBuilder","validator","errorHandler","shouldThrow","options","throwOnError","setErrorHandler","handler","handleError","error","quiet","isWhitespace","str","parse","buildASTWithRecovery","cleanWhitespace","filter","isTextNode","skipUntilTag","i","matchingStartIndex","findIndex","unclosedNode","optimize","removeEmptyNodes","mergeTextNodes","current","next","splice"],"mappings":"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"}