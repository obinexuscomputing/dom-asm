{"version":3,"file":"index.umd.js","sources":["../src/tokenizer/HTMLTokenizer.ts","../src/parser/HTMLParser.ts","../src/ast/HTMLASTOptimizer.ts","../src/generator/index.ts","../src/validator/index.ts"],"sourcesContent":[null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","lastTokenEnd","constructor","this","tokenize","tokens","textStart","length","char","peek","textContent","slice","textToken","createTextToken","isTextToken","value","push","tagStart","match","commentToken","readComment","isCommentToken","readDoctype","endTag","readEndTag","getColumnAtPosition","readStartTag","token","type","content","startPos","lastNewline","i","trim","getCurrentLocation","consume","name","readTagName","attributes","selfClosing","skipWhitespace","attrName","readUntil","quote","test","toLowerCase","pos","lastIndexOf","offset","str","startsWith","stop","start","count","result","HTMLParserError","Error","message","super","optimize","ast","root","removeEmptyTextNodes","mergeTextNodes","node","children","filter","child","forEach","current","next","currentText","nextText","splice","map","selfClosingTags","generateHTML","generateAttributes","join","isSelfClosingTag","Object","entries","key","tagName","includes","tokenizer","options","throwOnError","parse","buildAST","metadata","computeMetadata","error","errorHandler","nodeCount","elementCount","textCount","commentCount","stack","currentParent","element","handleError","pop","lastToken","traverse","setErrorHandler","handler","validate","errors","valid"],"mappings":"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"}