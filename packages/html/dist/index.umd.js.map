{"version":3,"file":"index.umd.js","sources":["../src/tokenizer/HTMLTokenizer.ts","../src/parser/HTMLParser.ts","../src/ast/HTMLASTOptimizer.ts","../src/generator/index.ts","../src/validator/index.ts"],"sourcesContent":[null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","commentToken","readComment","type","value","push","readDoctype","readEndTag","readStartTag","textToken","readText","getCurrentLocation","consume","Error","trim","readUntil","name","toLowerCase","attributes","selfClosing","skipWhitespace","test","attrName","quote","stop","start","char","slice","offset","str","startsWith","count","result","i","HTMLParserError","token","message","super","optimize","ast","root","removeEmptyTextNodes","mergeTextNodes","node","children","filter","child","forEach","current","next","combinedText","map","text","join","splice","selfClosingTags","generateHTML","generateAttributes","isSelfClosingTag","Object","entries","key","tagName","includes","tokenizer","options","throwOnError","parse","buildAST","metadata","computeMetadata","error","errorHandler","nodeCount","elementCount","textCount","commentCount","stack","currentParent","element","handleError","pop","lastToken","traverse","setErrorHandler","handler","validate","errors","valid"],"mappings":"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"}