{"version":3,"file":"index.js","sources":["../src/tokenizer/HTMLTokenizer.ts","../src/parser/HTMLParser.ts","../src/validator/index.ts","../src/generator/index.ts","../src/ast/HTMLASTOptimizer.ts"],"sourcesContent":[null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","commentToken","readComment","type","value","push","readDoctype","readEndTag","readStartTag","textToken","readText","getCurrentLocation","consume","Error","trim","readUntil","name","toLowerCase","attributes","selfClosing","skipWhitespace","test","attrName","quote","stop","start","char","slice","offset","str","startsWith","count","result","i","HTMLParserError","token","message","super","HTMLParser","tokenizer","options","throwOnError","parse","root","buildAST","metadata","computeMetadata","error","errorHandler","children","nodeCount","elementCount","textCount","commentCount","stack","currentParent","element","handleError","pop","lastToken","traverse","node","forEach","setErrorHandler","handler","HTMLValidator","validate","ast","errors","valid","child","HTMLCodeGenerator","selfClosingTags","generateHTML","generateAttributes","map","join","isSelfClosingTag","Object","entries","key","tagName","includes","HTMLASTOptimizer","optimize","removeEmptyTextNodes","mergeTextNodes","filter","current","next","combinedText","text","splice"],"mappings":"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"}