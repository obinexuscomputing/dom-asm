{"version":3,"file":"index.js","sources":["../src/tokenizer/HTMLTokenizer.ts","../src/parser/HTMLParser.ts","../src/validator/index.ts","../src/generator/index.ts","../src/ast/HTMLASTOptimizer.ts"],"sourcesContent":[null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","commentToken","readComment","type","value","push","readDoctype","readEndTag","readStartTag","textToken","readText","getCurrentLocation","consume","name","readTagName","attributes","selfClosing","skipWhitespace","attrName","readUntil","trim","quote","startPos","result","i","test","toLowerCase","offset","str","startsWith","stop","start","char","slice","count","HTMLParserError","Error","token","message","super","HTMLParser","tokenizer","options","throwOnError","parse","root","buildAST","metadata","computeMetadata","error","errorHandler","children","nodeCount","elementCount","textCount","commentCount","stack","currentParent","element","handleError","pop","lastToken","traverse","node","forEach","setErrorHandler","handler","HTMLValidator","validate","ast","errors","valid","child","HTMLCodeGenerator","selfClosingTags","generateHTML","generateAttributes","map","join","isSelfClosingTag","Object","entries","key","tagName","includes","HTMLASTOptimizer","optimize","removeEmptyTextNodes","mergeTextNodes","filter","current","next","currentText","nextText","splice"],"mappings":"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"}