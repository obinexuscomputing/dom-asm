{"version":3,"file":"index.js","sources":["../src/tokenizer/index.ts","../src/ast/HTMLAST.ts","../src/parser/HTMLParser.ts","../src/validator/index.ts","../src/generator/index.ts","../src/ast/HTMLASTOptimizer.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","push","readComment","readDoctype","readEndTag","readStartTag","readText","getCurrentLocation","consume","value","readUntil","trim","type","name","toLowerCase","Error","attributes","selfClosing","skipWhitespace","attrName","quote","attrValue","stop","start","test","slice","offset","str","startsWith","matches","pattern","count","result","i","char","addError","message","console","error","HTMLASTNode","children","options","HTMLASTBuilder","buildAST","root","stack","currentParent","token","newNode","warn","pop","lastToken","HTMLParserError","metadata","computeMetadata","nodeCount","elementCount","textCount","commentCount","traverse","node","forEach","super","captureStackTrace","HTMLParser","tokenizer","throwOnError","parse","errorHandler","setErrorHandler","handler","HTMLValidator","validate","ast","errors","valid","child","HTMLCodeGenerator","selfClosingTags","generateHTML","generateAttributes","map","join","isSelfClosingTag","Object","entries","key","tagName","includes","HTMLASTOptimizer","optimize","removeEmptyTextNodes","mergeAdjacentTextNodes","mergedChildren","lastTextNode","undefined","filter","mergeTextNodes","current","next","trimEnd","trimStart","splice"],"mappings":"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"}