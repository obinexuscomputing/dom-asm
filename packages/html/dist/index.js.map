{"version":3,"file":"index.js","sources":["../src/tokenizer/index.ts","../src/ast/HTMLAST.ts","../src/parser/HTMLParser.ts","../src/validator/index.ts","../src/generator/index.ts","../src/ast/HTMLASTOptimizer.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","push","readComment","readDoctype","readEndTag","readStartTag","readText","getCurrentLocation","consume","value","readUntil","trim","type","name","toLowerCase","Error","attributes","selfClosing","skipWhitespace","attrName","quote","attrValue","stop","start","test","slice","offset","str","startsWith","matches","pattern","count","result","i","char","addError","message","console","error","HTMLASTBuilder","buildAST","root","children","stack","currentParent","token","elementNode","pop","warn","map","node","metadata","computeMetadata","nodeCount","elementCount","textCount","commentCount","traverse","forEach","HTMLParserError","super","captureStackTrace","HTMLParser","tokenizer","options","throwOnError","parse","errorHandler","setErrorHandler","handler","HTMLValidator","validate","ast","errors","valid","child","HTMLCodeGenerator","selfClosingTags","generateHTML","generateAttributes","join","isSelfClosingTag","Object","entries","key","tagName","includes","HTMLASTOptimizer","optimize","removeEmptyNodes","mergeTextNodes","filter","current","next","splice"],"mappings":"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"}