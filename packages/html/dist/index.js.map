{"version":3,"file":"index.js","sources":["../src/ast/index.ts","../src/optimizer/index.ts","../src/tokenizer/index.ts","../src/validator/index.ts","../src/generator/index.ts","../src/parser/index.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["AST","root","constructor","this","type","name","children","parent","buildAST","tokens","stack","currentParent","token","elementNode","attributes","push","Error","pop","length","textNode","value","commentNode","getRoot","printAST","node","depth","indent","repeat","console","log","forEach","child","ASTOptimizer","optimize","removeEmptyNodes","mergeTextNodes","filter","trim","isSelfClosingTag","i","current","next","splice","tagName","includes","TokenType","HTMLTokenizer","input","position","tokenize","readEndTag","readComment","readStartTag","readText","readUntil","attrName","quote","attrValue","RegExp","stopChar","start","test","slice","Validator","namespaceRules","html","attributeRules","validationCache","Map","registerNamespace","namespace","tags","registerAttributes","tag","validateAST","ast","cacheKey","getCacheKey","has","get","errors","traverseAST","result","valid","set","validateElement","split","attr","Object","entries","JSON","stringify","key","undefined","CodeGenerator","generateHTML","generateAttributes","map","join","isElementNode","HTMLParserError","message","super","captureStackTrace","HTMLParser","tokenizer","astBuilder","validator","errorHandler","shouldThrow","options","throwOnError","setErrorHandler","handler","handleError","error","quiet","isWhitespace","str","parse","buildASTWithRecovery","cleanWhitespace","isTextNode","skipUntilTag","matchingStartIndex","findIndex","unclosedNode"],"mappings":"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"}