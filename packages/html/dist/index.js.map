{"version":3,"file":"index.js","sources":["../src/tokenizer/HTMLTokenizer.ts","../src/parser/HTMLParser.ts","../src/validator/index.ts","../src/generator/index.ts","../src/ast/HTMLASTOptimizer.ts"],"sourcesContent":[null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","lastTokenEnd","constructor","this","tokenize","tokens","textStart","length","char","peek","textContent","slice","textToken","createTextToken","isTextToken","value","push","tagStart","match","commentToken","readComment","isCommentToken","readDoctype","endTag","readEndTag","getColumnAtPosition","readStartTag","token","type","content","startPos","lastNewline","i","trim","getCurrentLocation","consume","name","readTagName","attributes","selfClosing","skipWhitespace","attrName","readUntil","quote","test","toLowerCase","pos","lastIndexOf","offset","str","startsWith","stop","start","count","result","HTMLParserError","Error","message","super","HTMLParser","tokenizer","options","throwOnError","parse","root","buildAST","metadata","computeMetadata","error","errorHandler","children","nodeCount","elementCount","textCount","commentCount","stack","currentParent","element","handleError","pop","lastToken","traverse","node","forEach","setErrorHandler","handler","HTMLValidator","validate","ast","errors","valid","child","HTMLCodeGenerator","selfClosingTags","generateHTML","generateAttributes","map","join","isSelfClosingTag","Object","entries","key","tagName","includes","HTMLASTOptimizer","optimize","removeEmptyTextNodes","mergeTextNodes","filter","current","next","currentText","nextText","splice"],"mappings":"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"}