{"version":3,"file":"index.js","sources":["../../src/tokenizer/index.ts","../../src/ast/index.ts","../../src/validator/index.ts","../../src/optimizer/index.ts","../../src/generator/index.ts","../../src/parser/index.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["HTMLTokenizer","constructor","input","this","position","tokenize","tokens","length","push","readEndTag","readComment","readStartTag","readText","name","readUntil","attributes","attrName","trim","quote","attrValue","RegExp","type","value","stopChar","start","test","slice","AST","root","children","parent","buildAST","stack","currentParent","token","elementNode","Error","pop","textNode","commentNode","getRoot","printAST","node","depth","indent","repeat","console","log","forEach","child","Validator","namespaceRules","html","attributeRules","validationCache","Map","registerNamespace","namespace","tags","registerAttributes","tag","validateAST","ast","cacheKey","getCacheKey","has","get","errors","traverseAST","result","valid","set","validateElement","tagName","split","includes","attr","Object","entries","JSON","stringify","key","undefined","ASTOptimizer","optimize","removeEmptyNodes","mergeTextNodes","filter","isSelfClosingTag","i","current","next","splice","CodeGenerator","generateHTML","generateAttributes","map","join","ParserError","message","super","captureStackTrace","Parser","options","throwOnError","errorHandler","shouldThrow","tokenizer","astBuilder","validator","setErrorHandler","handler","handleError","error","parse","buildASTWithRecovery","matchingStartIndex","findIndex","unclosedNode"],"mappings":"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"}