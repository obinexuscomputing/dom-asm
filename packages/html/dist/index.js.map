{"version":3,"file":"index.js","sources":["../src/tokenizer/index.ts","../src/ast/HTMLAST.ts","../src/parser/HTMLParser.ts","../src/validator/index.ts","../src/optimizer/index.ts","../src/generator/index.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["HTMLTokenizer","input","position","line","column","constructor","this","tokenize","tokens","length","peek","match","push","readComment","readDoctype","readEndTag","readStartTag","readText","getCurrentLocation","consume","value","readUntil","trim","type","name","toLowerCase","Error","attributes","selfClosing","skipWhitespace","attrName","quote","attrValue","stop","start","test","slice","offset","str","startsWith","matches","pattern","count","result","i","char","addError","message","console","error","HTMLASTBuilder","buildAST","root","children","stack","currentParent","token","elementNode","pop","metadata","computeMetadata","nodeCount","elementCount","textCount","commentCount","traverse","node","forEach","HTMLParserError","super","captureStackTrace","HTMLParser","tokenizer","options","throwOnError","parse","errorHandler","setErrorHandler","handler","HTMLValidator","validate","ast","errors","valid","child","HTMLASTOptimizer","optimize","removeEmptyNodes","mergeTextNodes","filter","current","next","splice","HTMLCodeGenerator","selfClosingTags","generateHTML","generateAttributes","map","join","isSelfClosingTag","Object","entries","key","tagName","includes"],"mappings":"MAOaA,EACHC,MACAC,SAAmB,EACnBC,KAAe,EACfC,OAAiB,EAEzB,WAAAC,CAAYJ,GACVK,KAAKL,MAAQA,EAGR,QAAAM,GACL,MAAMC,EAAsB,GAC5B,KAAOF,KAAKJ,SAAWI,KAAKL,MAAMQ,QAAQ,CAG3B,MAFAH,KAAKI,OAGZJ,KAAKK,MAAM,WACbH,EAAOI,KAAKN,KAAKO,eACRP,KAAKK,MAAM,aACpBH,EAAOI,KAAKN,KAAKQ,eACS,MAAjBR,KAAKI,KAAK,GACnBF,EAAOI,KAAKN,KAAKS,cAEjBP,EAAOI,KAAKN,KAAKU,gBAGnBR,EAAOI,KAAKN,KAAKW,YAGrB,OAAOT,EAGD,WAAAM,GACN,MAAMX,KAAEA,EAAIC,OAAEA,GAAWE,KAAKY,qBAC9BZ,KAAKa,QAAQ,GACb,MAAMC,EAAQd,KAAKe,UAAU,KAAKC,OAElC,OADAhB,KAAKa,UACE,CAAEI,KAAM,UAAWH,QAAOjB,OAAMC,UAIjC,UAAAW,GACN,MAAMZ,KAAEA,EAAIC,OAAEA,GAAWE,KAAKY,qBAC9BZ,KAAKa,QAAQ,GACb,MAAMK,EAAOlB,KAAKe,UAAU,KAAKI,cAAcH,OAE/C,OADAhB,KAAKa,UACE,CAAEI,KAAM,SAAUC,OAAMrB,OAAMC,UAE/B,YAAAY,GACN,MAAMb,KAAEA,EAAIC,OAAEA,GAAWE,KAAKY,qBAC9BZ,KAAKa,UAGL,MAAMK,EAAOlB,KAAKe,UAAU,UAAUI,cAAcH,OACpD,IAAKE,EACH,MAAM,IAAIE,MAAM,6BAA6BvB,aAAgBC,KAG/D,MAAMuB,EAAqC,CAAE,EAC7C,IAAIC,GAAc,EAGlB,KAAOtB,KAAKI,QAA0B,MAAhBJ,KAAKI,QAAgB,CAGzC,GAFAJ,KAAKuB,iBAEe,MAAhBvB,KAAKI,OAAgB,CACvBkB,GAAc,EACdtB,KAAKa,UACL,MAGF,MAAMW,EAAWxB,KAAKe,UAAU,WAAWC,OAC3C,IAAKQ,EAAU,MAGf,GAAoB,MAAhBxB,KAAKI,OAAgB,CACvBJ,KAAKa,UACL,MAAMY,EAAQzB,KAAKI,OACnB,GAAc,MAAVqB,GAA2B,MAAVA,EAAe,CAClCzB,KAAKa,UACL,MAAMa,EAAY1B,KAAKe,UAAUU,GACjCzB,KAAKa,UACLQ,EAAWG,GAAYE,OAEvBL,EAAWG,GAAYxB,KAAKe,UAAU,eAGxCM,EAAWG,GAAY,OAK3B,GAAoB,MAAhBxB,KAAKI,OAGP,MAAM,IAAIgB,MAAM,kBAAkBF,aAAgBrB,aAAgBC,KAGpE,OALEE,KAAKa,UAKA,CAAEI,KAAM,WAAYC,OAAMG,aAAYC,cAAazB,OAAMC,UAG1D,WAAAS,GACN,MAAMV,KAAEA,EAAIC,OAAEA,GAAWE,KAAKY,qBAC9BZ,KAAKa,QAAQ,GACb,MAAMC,EAAQd,KAAKe,UAAU,UAE7B,OADAf,KAAKa,QAAQ,GACN,CAAEI,KAAM,UAAWH,QAAOjB,OAAMC,UAGjC,QAAAa,GACN,MAAMd,KAAEA,EAAIC,OAAEA,GAAWE,KAAKY,qBAE9B,MAAO,CAAEK,KAAM,OAAQH,MADTd,KAAKe,UAAU,KAAKC,OACJnB,OAAMC,UAG9B,SAAAiB,CAAUY,GAChB,MAAMC,EAAQ5B,KAAKJ,SACnB,KACEI,KAAKJ,SAAWI,KAAKL,MAAMQ,UACT,iBAATwB,EACL3B,KAAKL,MAAMK,KAAKJ,YAAc+B,EAC9BA,EAAKE,KAAK7B,KAAKL,MAAMmC,MAAM9B,KAAKJ,SAAUI,KAAKJ,SAAW,MAE9DI,KAAKa,UAEP,OAAOb,KAAKL,MAAMmC,MAAMF,EAAO5B,KAAKJ,UAG9B,IAAAQ,CAAK2B,EAAiB,GAC5B,OAAO/B,KAAKL,MAAMK,KAAKJ,SAAWmC,IAAW,GAGvC,KAAA1B,CAAM2B,GACZ,OAAOhC,KAAKL,MAAMsC,WAAWD,EAAKhC,KAAKJ,UAGjC,OAAAsC,CAAQC,GACd,MAAML,EAAQ9B,KAAKL,MAAMmC,MAAM9B,KAAKJ,UACpC,MAA0B,iBAAZuC,EAAuBL,EAAMG,WAAWE,GAAWA,EAAQN,KAAKC,GAGxE,OAAAjB,CAAQuB,EAAgB,GAC9B,IAAIC,EAAS,GACb,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAOE,IAAK,CAC9B,MAAMC,EAAOvC,KAAKL,MAAMK,KAAKJ,UAChB,OAAT2C,GACFvC,KAAKH,OACLG,KAAKF,OAAS,GAEdE,KAAKF,SAEPuC,GAAUE,EACVvC,KAAKJ,WAEP,OAAOyC,EAGD,cAAAd,GACN,KAAO,KAAKM,KAAK7B,KAAKI,SACpBJ,KAAKa,UAGD,QAAA2B,CAASC,GACfC,QAAQC,MAAM,iBAAiB3C,KAAKH,gBAAgBG,KAAKF,WAAW2C,KAG9D,kBAAA7B,GACN,MAAO,CAAEf,KAAMG,KAAKH,KAAMC,OAAQE,KAAKF,eC1J9B8C,EACH1C,OACAN,SAER,WAAAG,CAAYG,GACVF,KAAKE,OAASA,EACdF,KAAKJ,SAAW,EAGX,QAAAiD,GACL,MAAMC,EAAoB,CAAE7B,KAAM,UAAWC,KAAM,OAAQ6B,SAAU,IAC/DC,EAAuB,CAACF,GAC9B,IAAIG,EAAgBH,EAEpB,KAAO9C,KAAKJ,SAAWI,KAAKE,OAAOC,QAAQ,CACzC,MAAM+C,EAAQlD,KAAKE,OAAOF,KAAKJ,YAE/B,OAAQsD,EAAMjC,MACZ,IAAK,WACH,MAAMkC,EAA2B,CAC/BlC,KAAM,UACNC,KAAMgC,EAAMhC,KACZG,WAAY6B,EAAM7B,WAClB0B,SAAU,IAEZE,EAAcF,UAAUzC,KAAK6C,GAC7BH,EAAM1C,KAAK6C,GACXF,EAAgBE,EAChB,MAEF,IAAK,SACCH,EAAM7C,OAAS,IACjB6C,EAAMI,MACNH,EAAgBD,EAAMA,EAAM7C,OAAS,IAEvC,MAEF,IAAK,OACL,IAAK,UACH8C,EAAcF,UAAUzC,KAAK,CAC3BW,KAAMiC,EAAMjC,KACZH,MAAOoC,EAAMpC,SAMrB,MAAO,CACLgC,OACAO,SAAUrD,KAAKsD,gBAAgBR,IAI3B,eAAAQ,CAAgBR,GACtB,IAAIS,EAAY,EACZC,EAAe,EACfC,EAAY,EACZC,EAAe,EAWnB,OATA,SAASC,EAASC,GAChBL,IACkB,YAAdK,EAAK3C,MAAoBuC,IACX,SAAdI,EAAK3C,MAAiBwC,IACR,YAAdG,EAAK3C,MAAoByC,IAC7BE,EAAKb,UAAUc,QAAQF,GAGzBA,CAASb,GACF,CAAES,YAAWC,eAAcC,YAAWC,iBCrF3C,MAAOI,UAAwB1C,MAC5B8B,MACAtD,SAEP,WAAAG,CAAY0C,EAAiBS,EAAkBtD,GAC7CmE,MAAMtB,GACNzC,KAAKkB,KAAO,kBACZlB,KAAKkD,MAAQA,EACblD,KAAKJ,SAAWA,EACZwB,MAAM4C,mBACR5C,MAAM4C,kBAAkBhE,KAAM8D,UAUvBG,EACHC,UACAC,QAER,WAAApE,CAAYoE,EAA6B,CAAEC,cAAc,IACvDpE,KAAKkE,UAAY,IAAIxE,EAAc,IACnCM,KAAKmE,QAAUA,EAGV,KAAAE,CAAM1E,GACX,MACMO,EADY,IAAIR,EAAcC,GACXM,WAEzB,IAEE,OADmB,IAAI2C,EAAe1C,GACpB2C,WAClB,MAAOF,GACP,GAAI3C,KAAKmE,QAAQC,aAAc,MAAMzB,EAIrC,OAHI3C,KAAKmE,QAAQG,cAActE,KAAKmE,QAAQG,aAAa3B,GAGlD,CACLG,KAAM,CAAE7B,KAAM,UAAWC,KAAM,OAAQ6B,SAAU,IACjDM,SAAU,CAAEE,UAAW,EAAGC,aAAc,EAAGC,UAAW,EAAGC,aAAc,KAKtE,eAAAa,CAAgBC,GACrBxE,KAAKmE,QAAQG,aAAeE,EAIvB,QAAA3B,CAAS3C,GACd,MAAM4C,EAAoB,CAAE7B,KAAM,UAAWC,KAAM,OAAQ6B,SAAU,IAC/DC,EAAuB,CAACF,GAC9B,IAAIG,EAAgBH,EAEpB,IAAK,MAAMI,KAAShD,EAClB,OAAQgD,EAAMjC,MACZ,IAAK,UACHgC,EAAcF,UAAUzC,KAAK,CAC3BW,KAAM,UACNH,MAAOoC,EAAMpC,QAEf,MAEF,IAAK,WACH,MAAMqC,EAA2B,CAC/BlC,KAAM,UACNC,KAAMgC,EAAMhC,KACZG,WAAY6B,EAAM7B,WAClB0B,SAAU,IAEZE,EAAcF,UAAUzC,KAAK6C,GAC7BH,EAAM1C,KAAK6C,GACXF,EAAgBE,EAChB,MAEF,IAAK,SACH,GAAIH,EAAM7C,OAAS,EACjB6C,EAAMI,MACNH,EAAgBD,EAAMA,EAAM7C,OAAS,QAErC,GAAIH,KAAKmE,QAAQG,aAAc,CAC7B,MAAM3B,EAAQ,IAAImB,EAAgB,sBAAsBZ,EAAMhC,OAAQgC,EAAOF,EAAM7C,QACnFH,KAAKmE,QAAQG,aAAa3B,GAG9B,MAEF,IAAK,OACL,IAAK,UACHM,EAAcF,UAAUzC,KAAK,CAC3BW,KAAMiC,EAAMjC,KACZH,MAAOoC,EAAMpC,QAMrB,GAAIkC,EAAM7C,OAAS,EACjB,MAAM,IAAI2D,EAAgB,yBAA0B5D,EAAOA,EAAOC,OAAS,GAAI6C,EAAM7C,QAGvF,OAAO2C,SC9DE2B,EACJ,QAAAC,CAASC,GAEd,MAAMC,EAAmB,GAEzB,OADA5E,KAAK2D,SAASgB,EAAKC,GACZ,CAAEC,MAAyB,IAAlBD,EAAOzE,OAAcyE,UAG/B,QAAAjB,CAASC,EAAmBgB,GAClC,GAAkB,YAAdhB,EAAK3C,KAAoB,CACtB2C,EAAK1C,MAAMb,MAAM,qBACpBuE,EAAOtE,KAAK,qBAAqBsD,EAAK1C,MAAQ,eAEhD,IAAK,MAAM4D,KAASlB,EAAKb,UAAY,GACnC/C,KAAK2D,SAASmB,EAAOF,WC1DhBG,EACJ,QAAAC,CAASL,GAGd,OAFA3E,KAAKiF,iBAAiBN,EAAI7B,MAC1B9C,KAAKkF,eAAeP,EAAI7B,MACjB6B,EAGD,gBAAAM,CAAiBrB,GACnBA,EAAKb,WACPa,EAAKb,SAAWa,EAAKb,SAASoC,QAAQL,MACjB,SAAfA,EAAM7D,MAA4C,KAAxB6D,EAAMhE,OAAOE,QAAkB8D,EAAMhE,SAGnEd,KAAKiF,iBAAiBH,IACf,MAKL,cAAAI,CAAetB,GACrB,GAAIA,EAAKb,SAAU,CACjB,IAAIT,EAAI,EACR,KAAOA,EAAIsB,EAAKb,SAAS5C,OAAS,GAAG,CACnC,MAAMiF,EAAUxB,EAAKb,SAAST,GACxB+C,EAAOzB,EAAKb,SAAST,EAAI,GAEV,SAAjB8C,EAAQnE,MAAiC,SAAdoE,EAAKpE,MAClCmE,EAAQtE,OAASsE,EAAQtE,OAAS,KAAOuE,EAAKvE,OAAS,IACvD8C,EAAKb,SAASuC,OAAOhD,EAAI,EAAG,KAE5BtC,KAAKkF,eAAeE,GACpB9C,cC/BGiD,EACHC,gBAER,WAAAzF,CAAYyF,EAA4B,CAAC,MAAO,QAAS,KAAM,KAAM,OAAQ,SAC3ExF,KAAKwF,gBAAkBA,EAGlB,YAAAC,CAAa7B,GAClB,GAAkB,SAAdA,EAAK3C,KACP,OAAO2C,EAAK9C,OAAS,GAGvB,GAAkB,YAAd8C,EAAK3C,KACP,MAAO,WAAQ2C,EAAK9C,OAAS,YAG/B,GAAkB,YAAd8C,EAAK3C,KAAoB,CAC3B,MAAMI,EAAarB,KAAK0F,mBAAmB9B,EAAKvC,YAAc,CAAA,GACxD0B,EAAWa,EAAKb,UAAU4C,KAAKb,GAAuB9E,KAAKyF,aAAaX,KAAQc,KAAK,KAAO,GAElG,OAAI5F,KAAK6F,iBAAiBjC,EAAK1C,MACtB,IAAI0C,EAAK1C,OAAOG,OAGlB,IAAIuC,EAAK1C,OAAOG,KAAc0B,MAAaa,EAAK1C,QAGzD,MAAO,GAGD,kBAAAwE,CAAmBrE,GACzB,OAAOyE,OAAOC,QAAQ1E,GACnBsE,KAAI,EAAEK,EAAKlF,KAAW,IAAIkF,MAAQlF,OAClC8E,KAAK,IAGF,gBAAAC,CAAiBI,GACvB,OAAOjG,KAAKwF,gBAAgBU,SAASD,GAAW"}