"use strict";var e;exports.TokenType=void 0,(e=exports.TokenType||(exports.TokenType={}))[e.Keyword=0]="Keyword",e[e.Identifier=1]="Identifier",e[e.Operator=2]="Operator",e[e.Delimiter=3]="Delimiter",e[e.Literal=4]="Literal",e[e.EndOfStatement=5]="EndOfStatement";exports.ASTBuilder=class{build(e){const t={type:"Program",children:[]};let r=0;function n(){const t=e[r];if(t.type===exports.TokenType.Literal)return r++,{type:"Literal",value:t.value};if(t.type===exports.TokenType.Identifier)return r++,{type:"Identifier",value:t.value};if(t.type===exports.TokenType.Keyword&&"const"===t.value){r++;const e=n();r++;const t=n();return r++,{type:"VariableDeclaration",value:"const",children:[e,t]}}throw new Error(`Unexpected token: ${"EOF"===t.value?";":t.value}`)}for(;r<e.length&&e[r].type!==exports.TokenType.EndOfStatement;)t.children?.push(n());return t}},exports.ASTOptimizer=class{optimize(e){return function e(t){if("VariableDeclaration"===t.type&&t.children){const e=t.children[1];if("Literal"===e.type)return{type:"InlineConstant",value:`${t.children[0].value}=${e.value}`}}return t.children&&(t.children=t.children.map(e)),t}(e)}},exports.Tokenizer=class{constructor(){this.keywords=new Set(["const","let","var","if","else","function","return"]),this.operators=new Set(["=","+","-","*","/","===","!==","<",">"]),this.delimiters=new Set([";","{","}","(",")","[","]"])}tokenize(e){const t=[];let r=0;for(;r<e.length;){const n=e[r];if(/\s/.test(n)){r++;continue}if(this.delimiters.has(n)){t.push({type:exports.TokenType.Delimiter,value:n}),r++;continue}let o="";for(;this.operators.has(o+e[r]);)o+=e[r++];if(o)t.push({type:exports.TokenType.Operator,value:o});else if(/[a-zA-Z_$]/.test(n)){let n="";for(;/[a-zA-Z0-9_$]/.test(e[r]);)n+=e[r++];t.push({type:this.keywords.has(n)?exports.TokenType.Keyword:exports.TokenType.Identifier,value:n})}else{if(!/[0-9]/.test(n))throw new Error(`Unexpected character: ${n}`);{let n="";for(;/[0-9.]/.test(e[r]);)n+=e[r++];t.push({type:exports.TokenType.Literal,value:n})}}}return t.push({type:exports.TokenType.EndOfStatement,value:"EOF"}),t}};
//# sourceMappingURL=index.cjs.map
