var e;!function(e){e[e.Keyword=0]="Keyword",e[e.Identifier=1]="Identifier",e[e.Operator=2]="Operator",e[e.Delimiter=3]="Delimiter",e[e.Literal=4]="Literal",e[e.EndOfStatement=5]="EndOfStatement"}(e||(e={}));class t{keywords=new Set(["const","let","var","if","else","function","return"]);operators=new Set(["=","+","-","*","/","===","!==","<",">"]);delimiters=new Set([";","{","}","(",")","[","]"]);tokenize(t){const r=[];let n=0;for(;n<t.length;){const i=t[n];if(/\s/.test(i)){n++;continue}if(this.delimiters.has(i)){r.push({type:e.Delimiter,value:i}),n++;continue}let l="";for(;this.operators.has(l+t[n]);)l+=t[n++];if(l)r.push({type:e.Operator,value:l});else if(/[a-zA-Z_$]/.test(i)){let i="";for(;/[a-zA-Z0-9_$]/.test(t[n]);)i+=t[n++];r.push({type:this.keywords.has(i)?e.Keyword:e.Identifier,value:i})}else{if(!/[0-9]/.test(i))throw new Error(`Unexpected character: ${i}`);{let i="";for(;/[0-9.]/.test(t[n]);)i+=t[n++];r.push({type:e.Literal,value:i})}}}return r.push({type:e.EndOfStatement,value:"EOF"}),r}}class r{build(t){const r={type:"Program",children:[]};let n=0;function i(){const r=t[n];if(r.type===e.Literal)return n++,{type:"Literal",value:r.value};if(r.type===e.Identifier)return n++,{type:"Identifier",value:r.value};if(r.type===e.Keyword&&"const"===r.value){n++;const e=i();n++;const t=i();return n++,{type:"VariableDeclaration",value:"const",children:[e,t]}}throw new Error(`Unexpected token: ${r.value}`)}for(;n<t.length&&t[n].type!==e.EndOfStatement;)r.children?.push(i());return r}}class n{optimize(e){return function e(t){if("VariableDeclaration"===t.type&&t.children){const e=t.children[1];if("Literal"===e.type)return{type:"InlineConstant",value:`${t.children[0].value}=${e.value}`}}return t.children&&(t.children=t.children.map(e)),t}(e)}}export{r as ASTBuilder,n as ASTOptimizer,e as TokenType,t as Tokenizer};
//# sourceMappingURL=index.js.map
