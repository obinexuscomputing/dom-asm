!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).DOMJS={})}(this,(function(e){"use strict";var t;e.JSTokenType=void 0,(t=e.JSTokenType||(e.JSTokenType={}))[t.Keyword=0]="Keyword",t[t.Identifier=1]="Identifier",t[t.Operator=2]="Operator",t[t.Delimiter=3]="Delimiter",t[t.Literal=4]="Literal",t[t.TemplateLiteral=5]="TemplateLiteral",t[t.Comment=6]="Comment",t[t.EndOfStatement=7]="EndOfStatement",t[t.Number=8]="Number",t[t.String=9]="String";e.JSASTBuilder=class{tokens;position;constructor(e){this.tokens=e,this.position=0}currentToken(){return this.position<this.tokens.length?this.tokens[this.position]:null}consumeToken(){return this.tokens[this.position++]}parseProgram(){const e={type:"Program",children:[]};for(;this.currentToken();){const t=this.parseStatement();t&&e.children.push(t)}return e}parseStatement(){const t=this.currentToken();return t?.type===e.JSTokenType.Keyword&&"const"===t.value?this.parseVariableDeclaration():null}parseVariableDeclaration(){this.consumeToken();const t=this.consumeToken();if(!t||t.type!==e.JSTokenType.Identifier)throw new Error("Expected identifier after 'const'");const r=this.consumeToken();if(!r||"="!==r.value)throw new Error("Expected '=' after identifier");const n=this.consumeToken();if(!n||n.type!==e.JSTokenType.Literal)throw new Error("Expected value after '='");return{type:"VariableDeclaration",children:[{type:"Identifier",value:t.value,children:[]},{type:"Literal",value:n.value,children:[]}]}}buildAST(){return this.parseProgram()}},e.JSASTOptimizer=class{constructor(){}optimize(e){return function e(t){if("VariableDeclaration"===t.type&&t.children){const e=t.children[1];if("Literal"===e.type)return{type:"InlineConstant",value:`${t.children[0].value}=${e.value}`,children:[]}}return t.children&&(t.children=t.children.map(e)),t}(e)}},e.JSCodeGenerator=class{constructor(){}generate(e){if("Program"===e.type)return e.children.map((e=>this.generate(e))).join("\n");if("VariableDeclaration"===e.type){const t=e.children.find((e=>"Identifier"===e.type)),r=e.children.find((e=>"Literal"===e.type));return`const ${t?.value} = ${r?.value};`}return""}},e.JSParser=class{parse(e){return"Program"===e.type?e.children?.map((e=>this.parse(e))):"VariableDeclaration"===e.type?`Declare ${e.children?.map((e=>this.parse(e))).join(" ")}`:"InlineConstant"===e.type?`Inline ${e.value}`:e.value}},e.JSTokenizer=class{keywords=new Set(["const","let","var","if","else","function","return","for","while","true","false"]);operators=new Set(["=","+","-","*","/","%","===","!==","<",">","&&","||","!","==","=>","+=","-=","*=","/=","||=","&&=","??","?."]);singleCharDelimiters=new Set([";","{","}","(",")","[","]"]);previousToken=null;constructor(){}shouldAddSemicolon(t){return!!this.previousToken&&(this.previousToken.type!==e.JSTokenType.Delimiter&&!t.some((t=>t.type===e.JSTokenType.Delimiter&&";"===t.value)))}readOperator(e,t){let r="",n="",i=t;for(;i<e.length&&/[=!<>&|+\-*/%?.]/.test(e[i]);)r+=e[i],this.operators.has(r)&&(n=r),i++;if(n)return[n,n.length];if(this.operators.has(e[t]))return[e[t],1];throw new Error(`Unexpected character: ${e[t]}`)}tokenize(t){const r=[];let n=0;const i=(e,t)=>{this.previousToken={type:e,value:t},r.push(this.previousToken)};for(;n<t.length;){const r=t[n];if(/\s/.test(r)){n++;continue}if("/"===r&&"/"===t[n+1]){let r="";for(n+=2;n<t.length&&"\n"!==t[n];)r+=t[n++];i(e.JSTokenType.Comment,r);continue}if("/"===r&&"*"===t[n+1]){let r="";for(n+=2;n<t.length&&("*"!==t[n]||"/"!==t[n+1]);)r+=t[n++];n+=2,i(e.JSTokenType.Comment,r);continue}if(/[0-9]/.test(r)){let r="";for(;n<t.length&&/[0-9.]/.test(t[n]);)r+=t[n++];i(e.JSTokenType.Literal,r);continue}if(/[a-zA-Z_$]/.test(r)){let r="";for(;n<t.length&&/[a-zA-Z0-9_$]/.test(t[n]);)r+=t[n++];this.keywords.has(r)?i(e.JSTokenType.Keyword,r):i(e.JSTokenType.Identifier,r);continue}const a=t.slice(n,n+2);if(this.operators.has(a))i(e.JSTokenType.Operator,a),n+=2;else{if(!this.singleCharDelimiters.has(r))throw new Error(`Unexpected character: ${r}`);i(e.JSTokenType.Delimiter,r),n++}}return i(e.JSTokenType.EndOfStatement,"EOF"),r}},e.JSValidator=class{errors;constructor(){this.errors=[]}validate(e){return this.errors=[],this.traverse(e),this.errors}traverse(e){switch(e.type){case"Program":this.validateProgram(e);break;case"VariableDeclaration":this.validateVariableDeclaration(e);break;case"InlineConstant":this.validateInlineConstant(e);break;case"Identifier":this.validateIdentifier(e);break;case"Literal":this.validateLiteral(e);break;default:this.errors.push(`Unknown node type: ${e.type}`)}if(e.children)for(const t of e.children)this.traverse(t)}validateProgram(e){e.children&&0!==e.children.length||this.errors.push("Program must contain at least one statement.")}validateVariableDeclaration(e){const[t,r]=e.children;t&&"Identifier"===t.type||this.errors.push("VariableDeclaration must have a valid identifier."),r&&"Literal"===r.type||this.errors.push("VariableDeclaration must have a valid literal value.")}validateInlineConstant(e){e.value||this.errors.push("InlineConstant must have a value.")}validateIdentifier(e){e.value&&/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(e.value)||this.errors.push(`Invalid identifier name: ${e.value}`)}validateLiteral(e){e.value||this.errors.push("Literal must have a value.")}}}));
//# sourceMappingURL=index.umd.js.map
