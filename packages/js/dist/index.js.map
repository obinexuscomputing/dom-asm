{"version":3,"file":"index.js","sources":["../../src/tokenizer/JSTokenizer.ts","../../src/ast/JSAst.ts","../../src/ast/JSAstMinimzer.ts","../../src/validator/JSValidator.ts","../../src/parser/JSParser.ts","../../src/generator/JSAstGenerator.ts"],"sourcesContent":[null,null,null,null,null,null],"names":["JSTokenType","JSTokenizer","keywords","Set","operators","delimiters","tokenize","input","tokens","current","addToken","type","value","push","trim","length","char","this","has","Delimiter","test","Keyword","Identifier","Literal","remainingInput","slice","multiCharOp","matchMultiCharOperator","Operator","Error","EndOfStatement","find","op","startsWith","JSASTBuilder","position","constructor","currentToken","consumeToken","peekToken","parseProgram","program","children","statement","parseStatement","token","parseVariableDeclaration","identifier","equals","semicolon","buildAST","JSAstMinimizer","uniqueNodes","Map","minimize","ast","clear","traverse","optimize","node","key","get","processedNode","map","child","performOptimization","set","simplifyNode","JSValidator","errors","validate","addError","code","message","includes","validateProgram","validateVariableDeclaration","validateBlockStatement","validateArrowFunction","validateTemplateLiteral","validateClass","validateMethodDefinition","validateAsyncFunction","validateObjectExpression","validateProperty","validateImport","validateExport","validateInlineConstant","validateIdentifier","validateLiteral","some","properties","forEach","prop","add","JSParser","parse","parseExpression","parseInlineConstant","parseBinaryExpression","parseBlockStatement","parseIfStatement","parseFunctionDeclaration","parseReturnStatement","filter","result","childResults","join","trimEnd","leftChild","rightChild","operator","condition","thenBranch","elseBranch","name","body","expression","JSGenerator","tokenizer","validator","parser","generateFromSource","source","options","validationErrors","success","convertValidationErrors","generateCode","err","generateFromAST","error","location","line","column","rawOutput","Array","isArray","formatOutput","format","formatCompact","formatPretty","indent","replace","level","lines","split","trimmedLine","endsWith","Math","max","repeat"],"mappings":"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"}